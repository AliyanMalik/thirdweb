{"version":3,"file":"thirdweb-checkout-46c13e50.esm-2986f9b5.js","sources":["../../node_modules/@thirdweb-dev/sdk/dist/thirdweb-checkout-46c13e50.esm.js"],"sourcesContent":["import { aW as ChainId } from './index-4902f18c.esm.js';\nimport invariant from 'tiny-invariant';\n\nconst PAPER_API_BASE = `https://paper.xyz/api`;\nconst PAPER_API_VERSION = `2022-08-12`;\n\n/**\n * @internal\n */\nconst PAPER_API_URL = `${PAPER_API_BASE}/${PAPER_API_VERSION}/platform/thirdweb`;\nconst PAPER_CHAIN_ID_MAP = {\n  [ChainId.Mainnet]: \"Ethereum\",\n  [ChainId.Goerli]: \"Goerli\",\n  [ChainId.Polygon]: \"Polygon\",\n  [ChainId.Mumbai]: \"Mumbai\",\n  [ChainId.Avalanche]: \"Avalanche\"\n};\n\n/**\n * @internal\n */\nfunction parseChainIdToPaperChain(chainId) {\n  invariant(chainId in PAPER_CHAIN_ID_MAP, `chainId not supported by paper: ${chainId}`);\n  return PAPER_CHAIN_ID_MAP[chainId];\n}\n/**\n *\n * @param contractAddress - the contract address\n * @param chainId - the chain id\n * @internal\n * @returns The paper xyz contract id\n * @throws if the contract is not registered on paper xyz\n */\nasync function fetchRegisteredCheckoutId(contractAddress, chainId) {\n  const paperChain = parseChainIdToPaperChain(chainId);\n  const res = await fetch(`${PAPER_API_URL}/register-contract?contractAddress=${contractAddress}&chain=${paperChain}`);\n  const json = await res.json();\n  invariant(json.result.id, \"Contract is not registered with paper\");\n  return json.result.id;\n}\n\n/**\n * The parameters for creating a paper.xyz checkout link.\n * @public\n */\n\n/**\n * @internal\n */\n\n/**\n * @internal\n */\n\nconst DEFAULT_PARAMS = {\n  expiresInMinutes: 15,\n  feeBearer: \"BUYER\",\n  sendEmailOnSuccess: true,\n  redirectAfterPayment: false\n};\n\n/**\n * @internal\n */\nasync function createCheckoutLinkIntent(contractId, params) {\n  const res = await fetch(`${PAPER_API_URL}/checkout-link-intent`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      contractId,\n      ...DEFAULT_PARAMS,\n      ...params,\n      metadata: {\n        ...params.metadata,\n        via_platform: \"thirdweb\"\n      },\n      // overrides that are hard coded\n      hideNativeMint: true,\n      hidePaperWallet: !!params.walletAddress,\n      hideExternalWallet: true,\n      hidePayWithCrypto: true,\n      usePaperKey: false\n    })\n  });\n  const json = await res.json();\n  invariant(json.checkoutLinkIntentUrl, \"Failed to create checkout link intent\");\n  return json.checkoutLinkIntentUrl;\n}\n\n/**\n * @internal\n */\nclass PaperCheckout {\n  constructor(contractWrapper) {\n    this.contractWrapper = contractWrapper;\n  }\n  async getCheckoutId() {\n    return fetchRegisteredCheckoutId(this.contractWrapper.address, await this.contractWrapper.getChainID());\n  }\n  async isEnabled() {\n    try {\n      return !!(await this.getCheckoutId());\n    } catch (err) {\n      return false;\n    }\n  }\n  async createLinkIntent(params) {\n    return await createCheckoutLinkIntent(await this.getCheckoutId(), params);\n  }\n}\n\nexport { PaperCheckout as P };\n"],"names":[],"mappings":";;AAGA,MAAM,cAAc,GAAG,CAAC,qBAAqB,CAAC,CAAC;AAC/C,MAAM,iBAAiB,GAAG,CAAC,UAAU,CAAC,CAAC;AACvC;AACA;AACA;AACA;AACA,MAAM,aAAa,GAAG,CAAC,EAAE,cAAc,CAAC,CAAC,EAAE,iBAAiB,CAAC,kBAAkB,CAAC,CAAC;AACjF,MAAM,kBAAkB,GAAG;AAC3B,EAAE,CAAC,OAAO,CAAC,OAAO,GAAG,UAAU;AAC/B,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,QAAQ;AAC5B,EAAE,CAAC,OAAO,CAAC,OAAO,GAAG,SAAS;AAC9B,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,QAAQ;AAC5B,EAAE,CAAC,OAAO,CAAC,SAAS,GAAG,WAAW;AAClC,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA,SAAS,wBAAwB,CAAC,OAAO,EAAE;AAC3C,EAAE,SAAS,CAAC,OAAO,IAAI,kBAAkB,EAAE,CAAC,gCAAgC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;AACzF,EAAE,OAAO,kBAAkB,CAAC,OAAO,CAAC,CAAC;AACrC,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,yBAAyB,CAAC,eAAe,EAAE,OAAO,EAAE;AACnE,EAAE,MAAM,UAAU,GAAG,wBAAwB,CAAC,OAAO,CAAC,CAAC;AACvD,EAAE,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,CAAC,EAAE,aAAa,CAAC,mCAAmC,EAAE,eAAe,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;AACvH,EAAE,MAAM,IAAI,GAAG,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC;AAChC,EAAE,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,uCAAuC,CAAC,CAAC;AACrE,EAAE,OAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC;AACxB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,cAAc,GAAG;AACvB,EAAE,gBAAgB,EAAE,EAAE;AACtB,EAAE,SAAS,EAAE,OAAO;AACpB,EAAE,kBAAkB,EAAE,IAAI;AAC1B,EAAE,oBAAoB,EAAE,KAAK;AAC7B,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA,eAAe,wBAAwB,CAAC,UAAU,EAAE,MAAM,EAAE;AAC5D,EAAE,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,CAAC,EAAE,aAAa,CAAC,qBAAqB,CAAC,EAAE;AACnE,IAAI,MAAM,EAAE,MAAM;AAClB,IAAI,OAAO,EAAE;AACb,MAAM,cAAc,EAAE,kBAAkB;AACxC,KAAK;AACL,IAAI,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;AACzB,MAAM,UAAU;AAChB,MAAM,GAAG,cAAc;AACvB,MAAM,GAAG,MAAM;AACf,MAAM,QAAQ,EAAE;AAChB,QAAQ,GAAG,MAAM,CAAC,QAAQ;AAC1B,QAAQ,YAAY,EAAE,UAAU;AAChC,OAAO;AACP;AACA,MAAM,cAAc,EAAE,IAAI;AAC1B,MAAM,eAAe,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa;AAC7C,MAAM,kBAAkB,EAAE,IAAI;AAC9B,MAAM,iBAAiB,EAAE,IAAI;AAC7B,MAAM,WAAW,EAAE,KAAK;AACxB,KAAK,CAAC;AACN,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,IAAI,GAAG,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC;AAChC,EAAE,SAAS,CAAC,IAAI,CAAC,qBAAqB,EAAE,uCAAuC,CAAC,CAAC;AACjF,EAAE,OAAO,IAAI,CAAC,qBAAqB,CAAC;AACpC,CAAC;AACD;AACA;AACA;AACA;AACA,MAAM,aAAa,CAAC;AACpB,EAAE,WAAW,CAAC,eAAe,EAAE;AAC/B,IAAI,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;AAC3C,GAAG;AACH,EAAE,MAAM,aAAa,GAAG;AACxB,IAAI,OAAO,yBAAyB,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC,eAAe,CAAC,UAAU,EAAE,CAAC,CAAC;AAC5G,GAAG;AACH,EAAE,MAAM,SAAS,GAAG;AACpB,IAAI,IAAI;AACR,MAAM,OAAO,CAAC,EAAE,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;AAC5C,KAAK,CAAC,OAAO,GAAG,EAAE;AAClB,MAAM,OAAO,KAAK,CAAC;AACnB,KAAK;AACL,GAAG;AACH,EAAE,MAAM,gBAAgB,CAAC,MAAM,EAAE;AACjC,IAAI,OAAO,MAAM,wBAAwB,CAAC,MAAM,IAAI,CAAC,aAAa,EAAE,EAAE,MAAM,CAAC,CAAC;AAC9E,GAAG;AACH;;;;"}